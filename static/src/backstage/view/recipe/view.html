<!DOCTYPE HTML>
<html>
<head>
	<meta charset="UTF-8">
	<title>烘焙帮后台管理系统</title>
</head>
<body class="definewidth m10">
	<table class="table table-bordered table-hover definewidth m10">
		<tr>
			<td class="tableleft">作者ID</td>
			<td class="clientId"></td>
		</tr>
		<tr>
			<td class="tableleft">作者</td>
			<td class="clientName"></td>
		</tr>
		<tr>
			<td class="tableleft">标题</td>
			<td class="title"></td>
		</tr>
		<tr>
			<td class="tableleft">简介</td>
			<td class="summary"></td>
		</tr>
		<tr>
			<td class="tableleft">浏览量</td>
			<td class="visit"></td>
		</tr>
		<tr>
			<td class="tableleft">分享量</td>
			<td class="share"></td>
		</tr>
		<tr>
			<td class="tableleft">封面图片</td>
			<td><img class="cover" src=""/></td>
		</tr>
		<tr>
			<td class="tableleft">材料</td>
			<td>
			<table class="table table-bordered table-hover definewidth m10 material">
				<tr>
					<th>名称</th>
					<th>数量</th>
				</tr>
			</table>
			</td>
		</tr>
		<tr>
			<td class="tableleft">步骤</td>
			<td>
			<table class="table table-bordered table-hover definewidth m10 step">
				<tr>
					<th>图片</th>
					<th>简介</th>
				</tr>
			</table>
			</td>
		</tr>
		<tr>
			<td class="tableleft">小贴士</td>
			<td>
			<table class="table table-bordered table-hover definewidth m10 tip">
				<tr>
					<th>描述</th>
				</tr>
			</table>
			</td>
		</tr>
		<tr>
			<td class="tableleft"></td>
			<td>
				<button type="button" class="btn btn-success" onclick="location.href='index.html'">返回列表</button>
			</td>
		</tr>
	</table>
	<script type="text/javascript" src="/js/fishstrap.js" charset="utf-8"></script>
	<script>
		fishstrap.use(['core/global','ui/dialog'],function($,dialog){
			function get( contentRecipeId ){
				$.get("/recipe/get",{contentRecipeId:contentRecipeId},function(data){
					data = $.JSON.parse(data);
					if( data.code != 0 )
						return;
					var data = data.data;
					//填充基本信息
					$(".clientId").text(data.clientId);
					$(".clientName").text(data.clientName);
					$(".title").text(data.title);
					$(".summary").text(data.summary);
					$(".visit").text(data.visit);
					$(".share").text(data.share);
					$(".cover").attr("src",data.image);
					
					//填充材料信息
					for( var singleMaterialItem in data.material ){
						var div = '<tr>'+
							'<td style="width:50%">'+$.security.htmlEncode(data.material[singleMaterialItem].name)+'</td>'+
							'<td>'+$.security.htmlEncode(data.material[singleMaterialItem].weight)+'</td>'+
						'</tr>';
						$('.material').append( $(div));
					}
					
					//填充步骤信息
					for( var singleStep in data.step ){
						var div = '<tr>'+
							'<td style="width:50%"><img src="'+$.security.urlEncode(data.step[singleStep].image)+'"/></td>'+
							'<td>'+$.security.htmlEncode(data.step[singleStep].text)+'</td>'+
						'</tr>';
						$('.step').append( $(div));
					}
					
					//填充贴士信息
					for( var singleTip in data.tip ){
						var div = '<tr>'+
							'<td>'+$.security.htmlEncode(data.tip[singleTip].text)+'</td>'+
						'</tr>';
						$('.tip').append( $(div));
					}
				});
			}
			$(function(){
				get($.location.getQueryArgv('contentRecipeId'));
			});
		});
	</script>
 </body>
</html>